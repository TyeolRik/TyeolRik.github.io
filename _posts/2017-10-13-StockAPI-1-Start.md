---
layout: post
title: "[키움API with C++] 시작하기"
section-type: post
category: "Stock_API"
tags:
  - c++
  - stock
  - API
  - kiwoom
---

근래 들어, 포스팅을 못 했다. 처음에는 공모전 준비라던가, 만들고 있는 안드로이드 프로젝트 등으로 인해 좀 많이 바빠서 그랬는데, 몇 주 그러고나니 귀찮아져서 블로그 활동이 뜸했다.

## 시작하기

> 본 학습의 목적은 인공지능을 이용한 주식매매 프로그램을 만드는 데까지 공부하려 한다.

최근 주식시장에 관심이 생겨, 주식 매매 프로그램을 만들어볼까 한다. 본래는 가장 자신있는 ~~생각되는~~ Java를 이용해서 프로그램을 작성하려 했으나, 관련 문서가 없는 관계로 본의아니게 C\+\+로 작성하게 되었다.

### 현재 필자의 세팅

 - Windows7 (64Bits)
 - Visual Studio 2012
 - 증권계좌 : 키움증권 (비대면계좌)

### 키움증권 회원가입

본 프로그램은 키움증권의 OpenAPI를 이용할 것이기 때문에 키움증권 계좌가 필요하다. 필자는 우리은행 계좌를 이용해서 연계계좌로 만들었는데, 핸드폰(필자는 안드로이드) Play Store에 가면 영웅문 계좌개설이라는 어플이 있으니 그걸 이용하면 평일 기준으로 하루면 만들어준다.

그리고 PC에서 영웅문4를 다운로드 받아서 로그인까지 해보자. 영웅문4를 다운로드 받는 이유는 키움증권의 영웅문4가 HTS 프로그램인데 뭐 키보드 보안이라던가 그런게 있기 때문에, 나중에 코드 작성할 때 불필요한 에러가 안 뜰 수 있다.

### 키움증권 모의투자 가입

아직 확실히 모르겠지만, API를 만들기 위한 보조도구\(?\)인 KOA Studio를 사용하기 위해서는 모의투자 대회에 등록해야한다. KOA Studio를 이용하기 위해서는 로그인을 해야하는데, 필자의 경우에는, 로그인 창에서 모의투자로 로그인할지, 실전으로 로그인할지를 선택하는 박스칸에서 체크 해제가 안된다. 그래서 모의투자 계좌로 밖에 KOA Studio 로그인을 할 수밖에 없는데 모의투자 계좌로 들어가려면 사전에 모의투자 신청을 해야한다.

![Imgur](https://i.imgur.com/FvbFq8P.png)

[키움증권 홈페이지](https://www2.kiwoom.com/)에서 로그인을 하고 아랫부분에 모의/실전투자 열의 **[상시 모의투자][c07b382c]** 에 신청을 해두자. ~~사진 참고~~ 필자는 나중에 올리거나 하면 되니깐 그냥 100만원 이라고만 해뒀다. 실제로 추후에 ~~아직 만든 것도 없지만~~ 만들 프로그램의 용도(실험)도 소액으로 자동 매매를 할 수 있도록 할 예정이기 때문에 100만원이면 적당한 것같다.

### OpenAPI 신청 및 설정

![Imgur](https://i.imgur.com/KeS2EMm.png?1)

위의 사진처럼 들어가면 OpenAPI에 대해서 알 수 있다. 들어가면 다음과 같은 OpenAPI 사용절차를 알 수 있다.

![Imgur](https://i.imgur.com/r65CCew.png)

빨간색 네모로 표시한 것이 필자가 한 것이다. KOA Studio 안에 개발가이드가 있으니 개발가이드를 굳이 따로 볼 필요는 없다.

### API Control Header / Source

어느 언어나 그렇듯 함수를 사용하기 위해서는 정의가 필요하고, C++에서는 Header 파일로 정의된다. 아래 사진처럼 키움증권 홈페이지 \- OpenAPI \- 자료실에서 샘플 자료를 설치하자.

![Imgur](https://i.imgur.com/D1GDJN5.png)

자료실의 \"키움 Open API 샘플\(주식\)\"을 클릭, 안의 첨부파일을 다운받은 후에 압축을 풀어놓는 것으로 기본 준비는 끝났다.




  [c07b382c]: https://www2.kiwoom.com/nkw.templateFrameSet.do?m=m1101000000 "모의투자 링크"
